(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-309eacb2"],{1799:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{attrs:{"aria-label":"pages"}},[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:1===t.pagination.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1","aria-disabled":"true"},on:{click:function(e){return e.preventDefault(),t.pageChange(t.pagination.current_page-1)}}},[t._v("Previous")])]),t._l(t.pagination.total_pages,(function(e){return a("li",{key:e,staticClass:"page-item",class:{active:t.pagination.current_page===e},attrs:{"aria-current":"pages"}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.pageChange(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:t.pagination.current_page===t.pagination.total_pages}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.pageChange(t.pagination.current_page+1)}}},[t._v("Next")])])],2)])])},r=[],i={props:{pagination:Object},methods:{pageChange:function(t){this.$emit("page_change",t)}}},n=i,l=a("2877"),o=Object(l["a"])(n,s,r,!1,null,null,null);e["a"]=o.exports},"220a":function(t,e,a){},"47e0":function(t,e,a){"use strict";var s=a("220a"),r=a.n(s);r.a},"91ab":function(t,e,a){},"993a":function(t,e,a){"use strict";var s=a("91ab"),r=a.n(s);r.a},ec8a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("loading",{attrs:{active:t.isLoading,color:"#71A2A7"},on:{"update:active":function(e){t.isLoading=e}}}),t._m(0),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-sm"},[t._m(1),a("tbody",[a("tr",{directives:[{name:"show",rawName:"v-show",value:!t.orders,expression:"!orders"}]},[t._m(2)]),t._l(t.orders,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center align-middle"},[!0===e.is_paid?a("span",{staticClass:"text-primary"},[t._v("付款成功")]):a("span",{staticClass:"text-danger"},[t._v("尚未付款")])]),a("td",{staticClass:"align-middle pl-4"},[a("ul",{staticClass:"list-unstyled mb-0"},[a("li",{staticClass:"font-weight-bold"},[t._v(t._s(e.user?e.user.name:"-"))]),a("li",[t._v("TEL： "+t._s(e.user?e.user.tel:"-"))]),a("li",[t._v("Email：\n                "),a("a",{attrs:{href:"mailto:"+(e.user?e.user.email:"")}},[t._v("\n                  "+t._s(e.user?e.user.email:"-")+"\n                ")])]),a("li",[t._v("ADD： "+t._s(e.user?e.user.address:"-"))])])]),a("td",{staticClass:"align-middle pr-4"},t._l(e.products,(function(e,s){return a("ul",{key:s,staticClass:"list-unstyled mb-0"},[a("li",[t._v(t._s(e.product.title)+" （"+t._s(e.qty)+"項）")])])})),0),a("td",{staticClass:"align-middle"},[t._v(t._s(t._f("timestamp")(e.create_at)))]),a("td",{staticClass:"text-right align-middle"},[t._v(t._s(t._f("currency")(e.total)))]),a("td",{staticClass:"align-middle pl-5"},[t._v(t._s(e.message))]),a("td",{staticClass:"align-middle pl-5"},[a("button",{staticClass:"btn btn-outline-primary mr-2",on:{click:function(a){return t.openModal(e)}}},[t._v("修改")])])])}))],2)])]),a("Modal",{attrs:{"temp-order":t.tempOrder},on:{get_orders:t.getOrders}}),a("Pagination",{directives:[{name:"show",rawName:"v-show",value:t.pagination,expression:"pagination"}],attrs:{pagination:t.pagination},on:{page_change:t.getOrders}})],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-3"},[a("h2",{staticClass:"font-weight-bold admin--title"},[t._v("訂單列表")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-borderless"},[a("tr",[a("th",{staticClass:"text-center",attrs:{width:"80"}},[t._v("是否付款")]),a("th",{staticClass:"pl-4"},[t._v("客戶資訊")]),a("th",{staticClass:"pr-4"},[t._v("訂單資訊")]),a("th",{attrs:{width:"80"}},[t._v("購買日期")]),a("th",{staticClass:"text-right",attrs:{width:"100"}},[t._v("應付金額")]),a("th",{staticClass:"pl-5",attrs:{width:"180"}},[t._v("客戶留言")]),a("th",{staticClass:"pl-5",attrs:{width:"200"}},[t._v("編輯")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{attrs:{colspan:"5"}},[a("p",{staticClass:"text-danger"},[t._v("無法取得訂單資料")])])}],i=a("1157"),n=a.n(i),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal fade",attrs:{id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("ValidationObserver",{ref:"observer"},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-dark text-white"},[a("h4",{staticClass:"modal-title pl-2",attrs:{id:"exampleModalLabel"}},[a("span",{staticClass:"align-middle"},[t._v("修改客戶訂單資料")])]),a("p",{staticClass:"text-danger m-0 align-bottom"},[t._v("＊請小心修改")]),a("button",{staticClass:"close text-light",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t.tempOrder.user?a("div",{staticClass:"modal-body ml-2 mr-2"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"username"}},[t._v("客戶名稱")]),a("ValidationProvider",{attrs:{name:"標題",rules:"required|min:1",vid:"username",persist:!0},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.name,expression:"tempOrder.user.name"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"請輸入客戶名稱"},domProps:{value:t.tempOrder.user.name},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"name",e.target.value)}}}),s[0]?a("span",{staticClass:"text-danger"},[t._v("\n                        "+t._s(s[0])+"\n                        "),a("br")]):t._e()]}}],null,!1,2176940535)})],1),a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"tel"}},[t._v("電話")]),a("ValidationProvider",{attrs:{name:"電話",rules:"required|numeric|min:8|max:10",vid:"tel",persist:!0},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.tel,expression:"tempOrder.user.tel"}],staticClass:"form-control",attrs:{type:"tel",id:"tel",maxlength:"10",placeholder:"請輸入客戶電話"},domProps:{value:t.tempOrder.user.tel},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"tel",e.target.value)}}}),s[0]?a("span",{staticClass:"text-danger"},[t._v("\n                        "+t._s(s[0])+"\n                        "),a("br")]):t._e()]}}],null,!1,2116415445)})],1),a("div",{staticClass:"form-group col-md-2"},[a("div",{staticClass:"form-check pt-4 pl-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.is_paid,expression:"tempOrder.is_paid"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled"},domProps:{checked:Array.isArray(t.tempOrder.is_paid)?t._i(t.tempOrder.is_paid,null)>-1:t.tempOrder.is_paid},on:{change:function(e){var a=t.tempOrder.is_paid,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=null,n=t._i(a,i);s.checked?n<0&&t.$set(t.tempOrder,"is_paid",a.concat([i])):n>-1&&t.$set(t.tempOrder,"is_paid",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.tempOrder,"is_paid",r)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否付款")])])])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"email"}},[t._v("Email")]),a("ValidationProvider",{attrs:{name:"Email",rules:"required|email",vid:"email",persist:!0},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.email,expression:"tempOrder.user.email"}],staticClass:"form-control",attrs:{type:"email",id:"email",placeholder:"請輸入客戶Email"},domProps:{value:t.tempOrder.user.email},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"email",e.target.value)}}}),s[0]?a("span",{staticClass:"text-danger"},[t._v("\n                      "+t._s(s[0])+"\n                      "),a("br")]):t._e()]}}],null,!1,498597100)}),a("label",{staticClass:"mt-3",attrs:{for:"add"}},[t._v("地址")]),a("ValidationProvider",{attrs:{name:"地址",rules:"required",vid:"add",persist:!0},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.address,expression:"tempOrder.user.address"}],staticClass:"form-control",attrs:{type:"text",id:"add",placeholder:"請輸入客戶地址"},domProps:{value:t.tempOrder.user.address},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"address",e.target.value)}}}),s[0]?a("span",{staticClass:"text-danger"},[t._v("\n                      "+t._s(s[0])+"\n                      "),a("br")]):t._e()]}}],null,!1,936554252)}),a("label",{staticClass:"mt-3",attrs:{for:"msg"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.message,expression:"tempOrder.message"}],staticClass:"form-control",attrs:{id:"msg",cols:"30",rows:"5",placeholder:"請輸入客戶備註"},domProps:{value:t.tempOrder.message},on:{input:function(e){e.target.composing||t.$set(t.tempOrder,"message",e.target.value)}}})],1)])])]):a("div",{staticClass:"modal-body ml-2 mr-2"},[a("p",{staticClass:"mt-3"},[t._v("此用戶未填寫購買資訊。")])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updatedOrder}},[t.status.isLoading?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n              確認修改\n            ")])])])])])],1)])},o=[],d=(a("8e6e"),a("96cf"),a("3b8d")),c=a("bd86"),u=(a("456d"),a("ac6a"),a("7bb1")),p=a("4c93"),m=a("60d4");function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(a,!0).forEach((function(e){Object(c["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}Object.keys(p).forEach((function(t){Object(u["c"])(t,g({},p[t],{message:m.messages[t]}))}));var f={props:{tempOrder:Object},data:function(){return{status:{isLoading:!1}}},methods:{updatedOrder:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.observer.validate();case 2:if(e=t.sent,e){t.next=5;break}return t.abrupt("return");case 5:a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("my_vueapi","/admin/order/").concat(a.tempOrder.id),a.status.isLoading=!0,this.$http.put(s,{data:a.tempOrder}).then((function(){a.status.isLoading=!1,n()("#orderModal").modal("hide"),a.$emit("get_orders"),a.tempOrder.user.name="",a.tempOrder.user.tel="",a.tempOrder.user.email="",a.tempOrder.user.address="",requestAnimationFrame((function(){a.$refs.observer.reset()}))}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},_=f,b=(a("993a"),a("2877")),h=Object(b["a"])(_,l,o,!1,null,"8c5f0ba6",null),C=h.exports,O=a("1799"),y={data:function(){return{orders:[],tempOrder:{},pagination:{},isLoading:!1}},components:{Modal:C,Pagination:O["a"]},methods:{getOrders:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("my_vueapi","/admin/orders?page=").concat(t),a=this;a.isLoading=!0,this.$http.get(e).then((function(t){a.isLoading=!1,a.orders=t.data.orders,a.pagination=t.data.pagination}))},openModal:function(t){this.tempOrder=Object.assign({},t),n()("#orderModal").modal("show")}},created:function(){this.getOrders()}},x=y,w=(a("47e0"),Object(b["a"])(x,s,r,!1,null,"4b359e10",null));e["default"]=w.exports}}]);
//# sourceMappingURL=chunk-309eacb2.85a11a2d.js.map